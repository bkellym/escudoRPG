{% extends 'core/baseTemplate.html' %}

{% block title %}
    Ficha | {{ entidade.personagem.nome }}
{% endblock title %}

{% block menu %}
<br>
<div class="container">
    <div class="row row-menu">
        <div class="col s12">
            <h1> {{ entidade.personagem.nome }} </h1>
        </div>
    </div>
    <hr>
    <div class="row row-menu">
        <div class="col s12">
            <p class="item-menu"> Ocupação: {{entidade.personagem.ocupacao}}</p>
        </div>
        <div class="col s12">
            <p class="item-menu"> Idade: {{entidade.personagem.idade}}</p>
        </div>
    </div>
    <hr>
</div>
<li>
    <a class="btn" href="{% url 'listar_mesas' %}">  Mesas
        <i class="material-icons left" style="margin-right:1px">format_list_bulleted</i>
    </a>
</li>
<li>
    <a class="btn" href="{% url 'ficha_cthulhu' entidade.personagem.id %}">  Modo Jogo
        <i class="material-icons left" style="margin-right:1px">format_list_bulleted</i>
    </a>
</li>

{% endblock %}

{% block conteudo %}

<div class="col s5 col-esquerda"  style="height:190px;">
    <!---------- Stats Inicio ---------->
    <div class="row row-title-barra" style="margin-top:18px;">
        <div class = 'col s12'> <h3> Vida </h3> </div>
    </div>

    <div class = 'row'>
        <div class = 'col s1 col-btn'>
            <form action="{% url 'diminui_pontos_vida' entidade.personagem.pk %}"  method="get"> {% csrf_token %}
                <input type="hidden" name="value" value = "1">
                <button class="btn-alt-stats" type="submit" value="-"> - </button>
            </form>
        </div>
        <div class = 'col s10 col-valor porcentagem black-text'>
            <div class = 'porcentagem-barra-verde black-text' style="width: {{ entidade.porcentagem.vida }}%;">
                {{entidade.ficha.pontos_vida}} / {{entidade.ficha.pontos_vida_max}}
            </div>
        </div>
        <div class = 'col s1 col-btn'>
            <form action="{% url 'aumenta_pontos_vida' entidade.personagem.pk %}"  method="get"> {% csrf_token %}
                <input type="hidden" name="value" value = "1">
                <button class="btn-alt-stats" type="submit" value="-"> + </button>
            </form>
        </div>
    </div>

    <div class="row row-title-barra" style="margin-top:28px;">
        <div class = 'col s12'> <h3> Sanidade </h3> </div>
    </div>

    <div class = 'row'>
        <div class = 'col s1 col-btn'>
            <form action="{% url 'diminui_sanidade' entidade.personagem.pk %}"  method="get"> {% csrf_token %}
                <input type="hidden" name="value" value = "1">
                <button class="btn-alt-stats" type="submit" value="-"> - </button>
            </form>
        </div>
        <div class = 'col s10 col-valor porcentagem black-text'>
            <div class = 'porcentagem-barra-azul black-text' style="width: {{ entidade.porcentagem.sanidade }}%;">
                {{entidade.ficha.sanidade}} / {{entidade.ficha.sanidade_max}}
            </div>
        </div>
        <div class = 'col s1 col-btn'>
            <form action="{% url 'aumenta_sanidade' entidade.personagem.pk %}"  method="get"> {% csrf_token %}
                <input type="hidden" name="value" value = "1">
                <button class="btn-alt-stats" type="submit" value="-"> + </button>
            </form>
        </div>
    </div>
    <!---------- Stats Fim ---------->
</div>
<div class="col s7 col-direita" style="height:190px;">
    <div class="row" style="margin:0px;">
        <div class="col s4">
            <div class="row row-atributo" style="margin-top:16px;">
                <div class="col s6">
                    <h4> FOR </h4>
                </div>
                <div class="col s3 normal">
                    {{ entidade.ficha.FOR }}
                </div>
                <div class="col s2">
                    <div class="row">
                        <div class="col s12 bom">
                            {{ entidade.ficha.FOR_bom }}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col s12 extremo">
                            {{ entidade.ficha.FOR_extremo }}
                        </div>
                    </div>
                </div>
            </div>
            <div class="row row-atributo">
                <div class="col s6">
                    <h4> CON </h4>
                </div>
                <div class="col s3 normal">
                    {{ entidade.ficha.CON }}
                </div>
                <div class="col s2">
                    <div class="row">
                        <div class="col s12 bom">
                            {{ entidade.ficha.CON_bom }}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col s12 extremo">
                            {{ entidade.ficha.CON_extremo }}
                        </div>
                    </div>
                </div>
            </div>
            <div class="row row-atributo">
                <div class="col s6">
                    <h4> TAM </h4>
                </div>
                <div class="col s3 normal">
                    {{ entidade.ficha.TAM }}
                </div>
                <div class="col s2">
                    <div class="row row-valores">
                        <div class="col s12 bom">
                            {{ entidade.ficha.TAM_bom }}
                        </div>
                    </div>
                    <div class="row row-valores">
                        <div class="col s12 extremo" style="margin-top:-7px;">
                            {{ entidade.ficha.TAM_extremo }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col s4">
            <div class="row row-atributo" style="margin-top:16px;">
                <div class="col s6">
                    <h4> DES </h4>
                </div>
                <div class="col s3 normal">
                    {{ entidade.ficha.DES }}
                </div>
                <div class="col s2">
                    <div class="row">
                        <div class="col s12 bom">
                            {{ entidade.ficha.DES_bom }}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col s12 extremo">
                            {{ entidade.ficha.DES_extremo }}
                        </div>
                    </div>
                </div>
            </div>
            <div class="row row-atributo">
                <div class="col s6">
                    <h4> APA </h4>
                </div>
                <div class="col s3 normal">
                    {{ entidade.ficha.APA }}
                </div>
                <div class="col s2">
                    <div class="row">
                        <div class="col s12 bom">
                            {{ entidade.ficha.APA_bom }}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col s12 extremo">
                            {{ entidade.ficha.APA_extremo }}
                        </div>
                    </div>
                </div>
            </div>
            <div class="row row-atributo">
                <div class="col s6">
                    <h4> EDU </h4>
                </div>
                <div class="col s3 normal">
                    {{ entidade.ficha.EDU }}
                </div>
                <div class="col s2">
                    <div class="row row-valores">
                        <div class="col s12 bom">
                            {{ entidade.ficha.EDU_bom }}
                        </div>
                    </div>
                    <div class="row row-valores">
                        <div class="col s12 extremo" style="margin-top:-7px;">
                            {{ entidade.ficha.EDU_extremo }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col s4">
            <div class="row row-atributo" style="margin-top:16px;">
                <div class="col s6">
                    <h4> FOR </h4>
                </div>
                <div class="col s3 normal">
                    {{ entidade.ficha.POD }}
                </div>
                <div class="col s2">
                    <div class="row">
                        <div class="col s12 bom">
                            {{ entidade.ficha.POD_bom }}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col s12 extremo">
                            {{ entidade.ficha.POD_extremo }}
                        </div>
                    </div>
                </div>
            </div>
            <div class="row row-atributo">
                <div class="col s6">
                    <h4> INT </h4>
                </div>
                <div class="col s3 normal">
                    {{ entidade.ficha.INT }}
                </div>
                <div class="col s2">
                    <div class="row">
                        <div class="col s12 bom">
                            {{ entidade.ficha.INT_bom }}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col s12 extremo">
                            {{ entidade.ficha.INT_extremo }}
                        </div>
                    </div>
                </div>
            </div>
            <div class="row row-atributo" style="margin-top:-10px;">
                <div class="col s8">
                    <h4> Taxa Movimento </h4>
                </div>
                <div class="col s3 normal" style="border-style: groove; margin-top:0px;">
                    {{ entidade.ficha.taxa_mov }}
                </div>
            </div>
        </div>
    </div>
</div>

{% for coluna in entidade.colunas %}
<div class = "col s3 col-esquerda" style="border-width: 0px 2px 4px 4px;">
    <br>
        {% for habilidade in coluna %}
        <div class="row row-atributo">
            <div class="col s7" style="margin-top:-5px">
                {% if habilidade.checked %}
                    <a class="habilidade-cthulhu modal-trigger" style="text-decoration:none; color: #26a69a;"
                       href="#{{ habilidade.id }}">{{ habilidade.titulo }} </a>
                {% endif %}
                {% if not habilidade.checked %}
                    <h4 class = "habilidade-cthulhu"> {{ habilidade.titulo }} </h4>
                {% endif %}
            </div>
            <div class="col s2 normal">
                {{ habilidade.normal }}
            </div>
            <div class="col s2">
                <div class="row">
                    <div class="col s12 bom">
                        {{ habilidade.bom }}
                    </div>
                </div>
                <div class="row">
                    <div class="col s12 extremo">
                        {{ habilidade.extremo }}
                    </div>
                </div>
            </div>
        </div>
    <br>
    <!-- Modal Structure -->
    <div id="{{ habilidade.id }}" class="modal">
        <div class="modal-content">
            <h4> Melhorar Habilidade {{ habilidade.titulo }} </h4>
            <p> Faça um teste e caso você falhe, ou seja tire mais que {{ habilidade.normal }},
                você pode subir de nível da habilidade, caso contrário, desmarque a habilidade
                e espere até a próxima oportunidade!</p>
        </div>
        <div class="modal-footer">
            <a href="#upar_{{ habilidade.id }}" class="modal-close waves-effect waves-green btn modal-trigger"> Subir Nível </a>
            <a class="modal-close waves-effect waves-green btn" href="{% url 'desmarcar' habilidade.id %}"> Desmarcar </a>
            <a href="#!" class="modal-close waves-effect waves-green btn"> Cancelar </a>
        </div>
    </div>


    <!-- Modal Structure -->
    <div id="upar_{{ habilidade.id }}" class="modal">
        <form action="{% url 'subir_nivel_habilidade' %}"  method="post"> {% csrf_token %}
            <div class="modal-content">
                <h4> Agora role um d10! </h4>
                <p> O resultado do dado determina quanto você vai aumentar na habilidade, insira aqui e estará tudo salvo. </p>
                <input type="hidden" name="id" value="{{ habilidade.id }}">
                <input type="number" name="value">
            </div>
            <div class="modal-footer">
                <button class="modal-close waves-effect waves-green btn" type="submit"> Salvar </button>
            </div>
        </form>
    </div>
    {% endfor %}
</div>
{% endfor %}

{% endblock conteudo %}